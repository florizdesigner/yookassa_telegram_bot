# Простой проект по интеграции бота Telegram + API ЮKassa
Проект служит как пример интеграции оплаты через ЮKassa в бота Telegram (без использования нативных методов Telegram Payments API: sendInvoice, createInvoiceLink), работа построена на вебхуках.

### Зависимости:
- [express.js](https://www.npmjs.com/package/express)
- [axios](https://www.npmjs.com/package/axios)
- [uuid](https://www.npmjs.com/package/uuid)
- [dotenv](https://www.npmjs.com/package/dotenv)

### Окружение:
Добавьте в корне проекта файл .env, в котором пропишите следующие переменные:
- **PORT**=Порт сервера
- **TELEGRAM_BOT_TOKEN**=Токен вашего бота от BotFather
- **TELEGRAM_BOT_LINK**=Ссылка для редиректа в ваш бот
- **YOOKASSA_SHOP_ID**=Идентификатор вашего магазина на стороне ЮKassa
- **YOOKASSA_GATEWAY_ID**=Идентификатор суб-аккаунта (если нет - оставьте пустым)
- **YOOKASSA_SECRET_KEY**=Секретный ключ от магазина на стороне ЮKassa (имеет префикс live_ или test_)

### Запуск на локальной машине (без своего сервера):
1. Запустите сервер командой `npm start`
2. Для получения https:// адреса вы можете воспользоваться Ngrok (или любым другим, главное чтобы адрес был не локальным) через терминал: `ngrok http 3001` (где 3001 = порт вашего сервера)
3. Скопируйте полученный адрес и добавьте к нему путь `/payment`, затем укажите его в ЛК ЮKassa (`Интеграция - HTTP-уведомления`), а также как минимум включите события `payment.succeeded, payment.waiting_for_capture`.
4. Можно пробовать, при вводе команды /pay 100 (где 100 = сумма платежа в рублях) в боте отправится сообщение со ссылкой на оплату.

P.S. Данный проект создан исключительно как каркас для работы с ботом Telegram и API ЮKassa, чтобы дать представление как это выглядит.